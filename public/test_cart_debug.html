<!DOCTYPE html>
<html>
<head>
    <title>Test Add to Cart</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>Test Add to Cart Functionality</h1>
    
    <button id="test-add-166" onclick="testAddToCart(166, 1)">Add Product 166 to Cart</button>
    <button id="test-add-invalid" onclick="testAddToCart(0, 1)">Test Invalid Product ID</button>
    <button id="test-add-zero-qty" onclick="testAddToCart(166, 0)">Test Zero Quantity</button>
    
    <div id="results" style="margin-top: 20px; padding: 10px; background: #f0f0f0;"></div>

    <script>
    function testAddToCart(productId, quantity) {
        console.log('Testing add to cart with:', {product_id: productId, quantity: quantity});
        
        fetch('ajax/add_to_cart.php', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: `product_id=${productId}&quantity=${quantity}`
        })
        .then(response => response.text())
        .then(data => {
            console.log('Raw response:', data);
            document.getElementById('results').innerHTML = 
                `<h3>Test Results for Product ${productId}, Qty ${quantity}:</h3>
                 <pre>${data}</pre>`;
            
            try {
                const json = JSON.parse(data);
                console.log('Parsed JSON:', json);
            } catch(e) {
                console.error('Failed to parse JSON:', e);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            document.getElementById('results').innerHTML = 
                `<h3>Error:</h3><pre>${error.message}</pre>`;
        });
    }
    </script>
</body>
</html>
